<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>فرم برنامه‌ریزی مطالعه هفتگی — حرفه‌ای</title>
<link href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css" rel="stylesheet">
<style>
:root{--primary:#0f4c75;--secondary:#3282b8;--muted:#f1f8fc;--row1:#f9fafe;--row2:#eef7fb;--text:#143243}
body{font-family:'Vazir',sans-serif;background:var(--muted);color:var(--text);margin:0;padding:12px;direction:rtl;font-size:13px}
.card{max-width:880px;margin:12px auto;background:#fff;border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(8,30,43,0.08)}
.header{display:flex;align-items:center;gap:12px;border-bottom:2px solid var(--primary);padding-bottom:10px}
.brand{display:flex;align-items:center;gap:10px}
.brand img{width:42px;height:42px;object-fit:contain;border-radius:6px}
h1{font-size:15px;color:var(--primary);margin:0}
.meta{margin-left:auto;text-align:left;font-size:12px;color:#345}
form{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
label{font-size:12px;font-weight:700}
input,select,textarea{width:100%;padding:5px;border:1px solid #d0e0f0;border-radius:6px;font-size:12px}
textarea{min-height:60px;resize:vertical}
.full{grid-column:1/-1}
table{width:100%;border-collapse:collapse;font-size:12px;margin-top:6px}
th,td{border:1px solid #d0e0f0;padding:6px;text-align:center;vertical-align:top}
th{background:var(--primary);color:#fff;font-weight:700}
tbody tr:nth-child(odd){background:var(--row1)}
tbody tr:nth-child(even){background:var(--row2)}
.compact td select,input{font-size:11px;padding:4px}
.controls{display:flex;flex-wrap:wrap;gap:6px;justify-content:flex-end;margin-top:10px}
.btn{background:var(--primary);color:#fff;border:none;padding:6px 8px;border-radius:6px;cursor:pointer;font-size:12px}
.btn.secondary{background:var(--secondary)}
.ghost{background:transparent;color:var(--primary);border:1px solid #d0e0f0}
.note{font-size:11px;color:#556;margin-top:6px}
.chrome-launch{text-align:center;margin-top:15px}
.chrome-launch a{display:inline-block;background:#2b7da3;color:#fff;padding:8px 14px;border-radius:8px;text-decoration:none;font-size:13px}
@media(max-width:720px){form{grid-template-columns:1fr} .meta{display:none} .brand img{width:36px;height:36px}}
</style>
</head>
<body>
<div class="card" id="app">
<div class="header">
<div class="brand">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Emblem_of_Iran.svg/120px-Emblem_of_Iran.svg.png" alt="آرم">
<img src="https://files.virgool.io/upload/users/1605210/posts/n8ihxhpij7op/ku69kkvrogtv.jpg" alt="لوگو">
</div>
<h1>فرم برنامه‌ریزی مطالعه هفتگی — پایه هفتم</h1>
<div class="meta" id="summary">خلاصه: اطلاعات ثبت نشده</div>
</div>

<form id="studyForm" autocomplete="off">
<div>
<label for="studentName">نام دانش‌آموز</label>
<input id="studentName" name="studentName" placeholder="مثلاً: علی رضایی">
</div>

<div>
<label for="className">کلاس</label>
<input id="className" name="className" placeholder="مثلاً: ۷/۲">
</div>

<div>
<label for="parentPhone">شماره تماس ولی</label>
<input id="parentPhone" name="parentPhone" placeholder="مثلاً: 0912...">
</div>

<div>
<label for="formDate">تاریخ تکمیل فرم</label>
<input id="formDate" name="formDate" placeholder="مثلاً: ۱۴۰۴/۰۷/۱۴">
</div>

<div class="full">
<label>برنامه هفتگی با زمان‌بندی</label>
<table class="compact" id="scheduleTable" aria-label="برنامه">
<thead>
<tr><th>روز</th><th>نوبت 1</th><th>نوبت 2</th><th>نوبت 3</th></tr>
</thead>
<tbody></tbody>
</table>
</div>

<div>
<label for="attachment">پیوست (صوت/ویدئو/عکس)</label>
<input type="file" id="attachment" accept="audio/*,video/*,image/*">
</div>

<div>
<label>&nbsp;</label>
<div style="display:flex;gap:6px;align-items:center">
<button type="button" class="btn" id="toPdf">📄 PDF</button>
<button type="button" class="btn secondary" id="whatsapp">💬 واتساپ</button>
<button type="button" class="btn" id="email">✉️ ایمیل</button>
</div>
</div>

<div class="full">
<div class="controls">
<a class="btn ghost" id="callLink" href="tel:00989367104429">📞 تماس</a>
<button type="button" class="btn ghost" id="printBtn">🖨 چاپ</button>
<button type="button" class="btn ghost" id="clearBtn" style="background:#f55;color:#fff">🧹 پاک‌سازی</button>
<button type="button" class="btn" id="saveLocal">💾 ذخیره</button>
</div>
<div class="note">ذخیره محلی فعال — واتساپ و ایمیل مستقیم آماده ارسال هستند.</div>
</div>
</form>

<div class="chrome-launch">
<a href="intent://Ali1398-ahvaz.github.io/Form_school_Razavi/index.html#Intent;scheme=https;package=com.android.chrome;end">🚀 اجرا در مرورگر کروم</a>
</div>
</div>

<script>
const managerPhone='989367104429';
const managerEmail='favasystemyallali@gmail.com';
const days=['شنبه','یک‌شنبه','دوشنبه','سه‌شنبه','چهارشنبه','پنج‌شنبه','جمعه'];
const lessons=['','ریاضی','علوم','ادبیات','عربی','مطالعات اجتماعی','زبان انگلیسی','مرور'];
const hours=['','۷','۸','۹','۱۰','۱۱','۱۲','۱۳','۱۴','۱۵','۱۶','۱۷','۱۸','۱۹','۲۰','۲۱','۲۲'];

const tbody=document.querySelector('#scheduleTable tbody');
days.forEach((d,i)=>{
  const tr=document.createElement('tr');
  function timeSelect(name){
    return `<select name="${name}_lesson_${i}">${lessons.map(l=>`<option value="${l}">${l||'درس'}</option>`).join('')}</select>
    <div style="font-size:11px;margin-top:2px">
    از <select name="${name}_from_${i}">${hours.map(h=>`<option value="${h}">${h||'ساعت'}</option>`).join('')}</select>
    تا <select name="${name}_to_${i}">${hours.map(h=>`<option value="${h}">${h||'ساعت'}</option>`).join('')}</select>
    </div>`;
  }
  tr.innerHTML=`<td>${d}</td>
  <td>${timeSelect('a')}</td>
  <td>${timeSelect('b')}</td>
  <td>${timeSelect('c')}</td>`;
  tbody.appendChild(tr);
});

const selector='#studyForm input, #studyForm select, #studyForm textarea';
function saveAll(){document.querySelectorAll(selector).forEach(el=>{localStorage.setItem('study_form_'+(el.name||el.id),el.value||'');});updateSummary();}
function loadAll(){document.querySelectorAll(selector).forEach(el=>{const v=localStorage.getItem('study_form_'+(el.name||el.id));if(v!==null) el.value=v;});updateSummary();}
document.addEventListener('input',function(e){if(e.target.matches(selector)){localStorage.setItem('study_form_'+(e.target.name||e.target.id),e.target.value||'');debounceUpdate();}});

const summaryEl=document.getElementById('summary');
function generateSummary(){const name=document.getElementById('studentName').value||'(بدون نام)';const cls=document.getElementById('className').value||'(بدون کلاس)';let cnt=0;document.querySelectorAll('#scheduleTable select').forEach(s=>{if(s.value) cnt++;});return `دانش‌آموز: ${name} — کلاس: ${cls} — انتخاب‌ها: ${cnt}`;}
function updateSummary(){summaryEl.textContent=generateSummary();}
let debTimer=null;
function debounceUpdate(){if(debTimer) clearTimeout(debTimer);debTimer=setTimeout(updateSummary,200);}
loadAll();

document.getElementById('saveLocal').addEventListener('click',saveAll);
document.getElementById('clearBtn').addEventListener('click',function(){if(!confirm('آیا اطلاعات پاک شود؟')) return;document.querySelectorAll(selector).forEach(el=>el.value='');Object.keys(localStorage).forEach(k=>{if(k.startsWith('study_form_')) localStorage.removeItem(k);});updateSummary();});
document.getElementById('printBtn').addEventListener('click',()=>window.print());

// واتساپ
document.getElementById('whatsapp').addEventListener('click', function(){
    const name=encodeURIComponent(document.getElementById('studentName').value||'');
    const cls=encodeURIComponent(document.getElementById('className').value||'');
    const message=`سلام، فرم برنامه‌ریزی ${name} — کلاس ${cls} آماده شد.`;
    const waLink=`https://wa.me/${managerPhone}?text=${message}`;
    window.open(waLink,'_blank');
});

// ایمیل
document.getElementById('email').addEventListener('click',function(){
    const name=document.getElementById('studentName').value||'';
    const cls=document.getElementById('className').value||'';
    const subject=encodeURIComponent('فرم برنامه‌ریزی مطالعه هفتگی');
    const body=encodeURIComponent(`دانش‌آموز: ${name}\nکلاس: ${cls}\nفرم آماده ارسال است.`);
    window.open(`mailto:${managerEmail}?subject=${subject}&body=${body}`,'_blank');
});
</script>
</body>
</html>
