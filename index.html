<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ÙØ±Ù… Ø±ÙˆØ²Ø§Ù†Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</title>
  <style>
    body { font-family: Vazir, sans-serif; background: #f5f9ff; padding: 20px; }
    .card { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    h2 { color: #0f4c75; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    .disabled { background: #eee; color: #888; }
    .controls { margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end; }
    button { padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; }
    .save { background: #0f4c75; color: #fff; }
    .send { background: #3282b8; color: #fff; }
  </style>
</head>
<body>
<div class="card">
  <h2>ÙØ±Ù… Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡</h2>
  <div id="summary"></div>
  <table id="schedule">
    <thead>
      <tr><th>Ø±ÙˆØ²</th><th>Ù†ÙˆØ¨Øª Û±</th><th>Ù†ÙˆØ¨Øª Û²</th><th>Ù†ÙˆØ¨Øª Û³</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="controls">
    <button class="save" onclick="saveToday()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø§Ù…Ø±ÙˆØ²</button>
    <button class="send" onclick="sendWeek()">ğŸ“¤ Ø§Ø±Ø³Ø§Ù„ Ù†Ù‡Ø§ÛŒÛŒ</button>
  </div>
</div>

<script>
const days = ['Ø´Ù†Ø¨Ù‡','ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡','Ø¯ÙˆØ´Ù†Ø¨Ù‡','Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡','Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡','Ù¾Ù†Ø¬â€ŒØ´Ù†Ø¨Ù‡','Ø¬Ù…Ø¹Ù‡'];
const lessons = ['','Ø±ÛŒØ§Ø¶ÛŒ','Ø¹Ù„ÙˆÙ…','Ø§Ø¯Ø¨ÛŒØ§Øª','Ø¹Ø±Ø¨ÛŒ','Ù…Ø·Ø§Ù„Ø¹Ø§Øª','Ø²Ø¨Ø§Ù†','Ù…Ø±ÙˆØ±'];
const todayIndex = new Date().getDay(); // 0=ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡, 6=Ø´Ù†Ø¨Ù‡ â†’ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ… Ø¨Ø±Ø§ÛŒ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ

function getPersianDay(index) {
  return days[(index + 6) % 7]; // ØªØ·Ø¨ÛŒÙ‚ Ø¨Ø§ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ
}

const tbody = document.querySelector('#schedule tbody');
for (let i = 0; i < 7; i++) {
  const dayName = getPersianDay(i);
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${dayName}</td>` +
    ['1','2','3'].map(n => {
      const key = `${dayName}_n${n}`;
      const saved = localStorage.getItem(key) || '';
      const disabled = i === todayIndex ? '' : 'disabled';
      return `<td><select ${disabled} onchange="save('${key}', this.value)">
        ${lessons.map(l => `<option value="${l}" ${l===saved?'selected':''}>${l||'Ø¯Ø±Ø³'}</option>`).join('')}
      </select></td>`;
    }).join('');
  tbody.appendChild(tr);
}

function save(key, value) {
  localStorage.setItem(key, value);
  updateSummary();
}

function saveToday() {
  alert('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù…Ø±ÙˆØ² Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ âœ…');
}

function sendWeek() {
  let summary = '';
  for (let i = 0; i < 7; i++) {
    const day = getPersianDay(i);
    summary += `${day}: `;
    for (let n = 1; n <= 3; n++) {
      const val = localStorage.getItem(`${day}_n${n}`) || 'â€”';
      summary += `Ù†ÙˆØ¨Øª ${n}: ${val} | `;
    }
    summary += '\n';
  }
  alert('Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ù…Ø¯ÛŒØ±:\n\n' + summary);
}

function updateSummary() {
  let filled = 0;
  for (let i = 0; i < 7; i++) {
    for (let n = 1; n <= 3; n++) {
      const val = localStorage.getItem(`${getPersianDay(i)}_n${n}`);
      if (val) filled++;
    }
  }
  document.getElementById('summary').textContent = `âœ… ØªØ¹Ø¯Ø§Ø¯ Ù†ÙˆØ¨Øªâ€ŒÙ‡Ø§ÛŒ ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡: ${filled}`;
}
updateSummary();
</script>
</body>
</html>
